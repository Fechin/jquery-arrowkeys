!function(a){"use strict";var b="function"==typeof define&&define.amd,c="undefined"!=typeof module&&module.exports;b?define(["jquery"],a):c?module.exports=a(require("jquery")):a(window.jQuery)}(function(a){var b=function(a){this.opts=a};b.prototype={up:function(b){var c=a("."+this.opts.focusedClass);a.isFunction(this.opts.upFunc)&&this.opts.upFunc.call(this,c,b)},down:function(b){var c=a("."+this.opts.focusedClass);a.isFunction(this.opts.downFunc)&&this.opts.downFunc.call(this,c,b)},left:function(){var b=a("."+this.opts.focusableClass);actv=this.opts.focusedClass;for(var c=1;c<b.length;c++)if(b.eq(c).hasClass(actv)){b.eq(c).removeClass(actv),b.eq(c-1).focus().addClass(actv);break}},right:function(){var b=a("."+this.opts.focusableClass);actv=this.opts.focusedClass;for(var c=0;c<b.length-1;c++)if(b.eq(c).hasClass(actv)){b.eq(c).removeClass(actv),b.eq(c+1).focus().addClass(actv);break}}};var c=function(c,d){this.opts=a.extend({activeFirstElement:!1,customKeyEvent:{},focusableClass:"focusable",focusedClass:"focused",direction:"v"},d),this.keys={LEFT:37,UP:38,RIGHT:39,DOWN:40,ENTER:13,BACK:8},"v"==this.opts.direction.trim()&&a.extend(this.keys,{LEFT:38,UP:37,RIGHT:40,DOWN:39}),console.log(this.keys),this.arrow=new b(this.opts),this.target=c,this.__constructor__()};c.prototype={__constructor__:function(){this.destroy(),this.opts.activeFirstElement&&this.activeFirstElement();var b=this.opts.tabindex||1;a(this.target).attr("tabindex",b)},activeFirstElement:function(){var b=a("."+this.opts.focusableClass),c=this.opts.focusedClass;b.first().focus().addClass(c)},addCustomKeyEvent:function(b){b=b||window.event;var c=this.opts.customKeyEvent;for(var d in c)d==(b.keyCode||b.which)&&a.isFunction(c[d])&&c[d].call(this,b)},addCommonKeyEvent:function(b){var c=this.keys,d=this.opts.focusedClass,e=a("."+d);b=b||window.event;var f=b.which||b.keyCode;if(0===e.length)for(var g in c)if(f===c[g])return void this.activeFirstElement();switch(f){case c.LEFT:this.arrow.left(b),b.preventDefault();break;case c.UP:this.arrow.up(b),b.preventDefault();break;case c.RIGHT:this.arrow.right(b),b.preventDefault();break;case c.DOWN:this.arrow.down(b),b.preventDefault();break;case c.ENTER:a.isFunction(this.opts.enterFunc)&&this.opts.enterFunc.call(this,e,b),b.preventDefault();break;case c.BACK:a.isFunction(this.opts.backFunc)&&this.opts.backFunc.call(this,e,b),b.preventDefault();break;default:return}},destroy:function(){a(this.target).unbind("keydown"),a(this.target).find("."+this.opts.focusableClass).blur().removeClass(this.opts.focusedClass)}},jQuery.fn.arrowkeys=function(b){var d=this||document,e=new c(d,b);return a(d).keydown(function(a){e.addCommonKeyEvent(a),e.addCustomKeyEvent(a)}),jQuery}});